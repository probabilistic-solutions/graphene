import{a as m}from"./chunk-HGK3H7QL.js";import{b as v}from"./chunk-5KAQSVR4.js";import{a as E}from"./chunk-FNXXNWUE.js";import{a as _}from"./chunk-MSGQGVB3.js";import{a as k}from"./chunk-A74FWP22.js";import{a as S}from"./chunk-NB5AMTOW.js";import{b as r,d as b}from"./chunk-DPD5ZZAY.js";import{a as n}from"./chunk-S4Z7DAZ3.js";import{a as g}from"./chunk-5DYO2IB6.js";import{a as t,f as h,j as f}from"./chunk-TII5QPTS.js";var y,p=y=class extends k(f){_handleSlotChange({target:i}){var o;this.tabTip&&((o=i.assignedNodes().filter(s=>s.nodeType===Node.ELEMENT_NODE&&s.tagName==="BUTTON")[0])===null||o===void 0||o.classList.add(`${n}--popover--tab-tip__button`)),this.requestUpdate()}_handleMouseDown(i){let o=i.composedPath(),a=this._contentSlotNode.assignedElements()[0];this._lastClickWasInsidePopoverContent=a&&o.includes(a),this._lastClickWasInsidePopoverContent&&setTimeout(()=>{this._lastClickWasInsidePopoverContent=!1},0)}_handleFocusOut(i){let o=i.relatedTarget,a=i.composedPath(),s=this._triggerSlotNode.assignedElements({flatten:!0})[0];if(this._lastClickWasInsidePopoverContent){this._lastClickWasInsidePopoverContent=!1;return}if(!(o&&s&&(a.includes(s)||s===o||s.contains(o)))&&!this.contains(o)){let e=this.open;this.open=!1,e&&this.dispatchEvent(new CustomEvent(this.constructor.eventOnClose,{bubbles:!0,composed:!0}))}}_handleOutsideClick(i){var o,a,s;let e=i.composedPath();if(e.includes(this._triggerSlotNode.assignedElements()[0]))return;let c=(a=(o=this.querySelector(this.constructor.selectorPopoverContent))===null||o===void 0?void 0:o.shadowRoot)===null||a===void 0?void 0:a.querySelector(this.constructor.selectorPopoverContentClass);if(e.includes(c))return;let l=i.target,u=(s=i.composedPath)===null||s===void 0?void 0:s.call(i)[0];this.open&&l&&!this.contains(l)&&!this.contains(u)&&(this.open=!1,this.dispatchEvent(new CustomEvent(this.constructor.eventOnClose,{bubbles:!0,composed:!0})))}constructor(){super(),this.popoverController=new E(this),this.align="",this.autoalign=!1,this.caret=!0,this.dropShadow=!0,this.border=!1,this.highContrast=!1,this.open=!1,this.tabTip=!1,this.backgroundToken=v.LAYER,this._lastClickWasInsidePopoverContent=!1,this._handleOutsideClick=this._handleOutsideClick.bind(this)}connectedCallback(){super.connectedCallback(),document.addEventListener("click",this._handleOutsideClick)}disconnectedCallback(){document.removeEventListener("click",this._handleOutsideClick)}_resolveAutoAlignBoundary(){var i;let o=((i=this.autoAlignBoundary)!==null&&i!==void 0?i:"").trim();if(!o||o==="clippingAncestors")return"clippingAncestors";let a=/^rect\(\s*([-\d.]+)\s*,\s*([-\d.]+)\s*,\s*([-\d.]+)\s*,\s*([-\d.]+)\s*\)$/i.exec(o);if(a){let[,e,c,l,u]=a;return{x:+e,y:+c,width:+l,height:+u}}let s=o.split(",").map(e=>e.trim()).filter(e=>e.length>1&&e.startsWith("#")).map(e=>e.slice(1).trim()).filter(Boolean);if(s.length>0){let e=[],c=new Set;for(let l of s){if(c.has(l))continue;c.add(l);let u=document.getElementById(l);u&&e.push(u)}return e.length===1?e[0]:e}return"clippingAncestors"}updated(i){var o,a,s;let{selectorPopoverContent:e}=this.constructor;if(["open","align","autoalign","caret","dropShadow","border","tabTip","highContrast","backgroundToken"].forEach(c=>{if(i.has(c)){let{[c]:l}=this;this.querySelector(e)&&(this.querySelector(e)[c]=l)}}),this.autoalign&&this.open){let c=this._triggerSlotNode.assignedElements()[0],l=this._contentSlotNode.assignedElements()[0],u=(o=l==null?void 0:l.shadowRoot)===null||o===void 0?void 0:o.querySelector(y.selectorPopoverContentClass),C=(a=l==null?void 0:l.shadowRoot)===null||a===void 0?void 0:a.querySelector(y.selectorPopoverCaret);c&&u&&((s=this.popoverController)===null||s===void 0||s.setPlacement({trigger:c,target:u,arrowElement:this.caret&&C?C:void 0,caret:this.caret,flipArguments:{fallbackAxisSideDirection:"start"},alignment:this.align,open:this.open,alignmentAxisOffset:this.alignmentAxisOffset,autoAlignBoundary:this._resolveAutoAlignBoundary(),isTabTip:this.tabTip}))}}render(){let{dropShadow:i,border:o,highContrast:a,open:s,tabTip:e,_handleSlotChange:c}=this;e&&(this.caret=!e),this.autoalign||(this.align=this.align?this.align:e?"bottom-start":"bottom"),e&&(["bottom-start","bottom-end","bottom-left","bottom-right"].includes(this.align)||(this.align="bottom-start"));let l=S({[`${n}--popover-container`]:!0,[`${n}--popover--caret`]:this.caret,[`${n}--popover--drop-shadow`]:i,[`${n}--popover--border`]:o,[`${n}--popover--high-contrast`]:a,[`${n}--popover--open`]:s,[`${n}--popover--${this.align}`]:!0,[`${n}--popover--tab-tip`]:e,[`${n}--popover--background-token__background`]:this.backgroundToken===v.BACKGROUND&&!a});return h`
      <span class="${l}" part="popover-container">
        <slot @slotchange="${c}"></slot>
        <slot name="content"></slot>
      </span>
    `}static get selectorPopoverContentClass(){return`.${n}--popover-content`}static get selectorPopoverCaret(){return`.${n}--popover-caret`}static get selectorPopoverContent(){return`${n}-popover-content`}static get eventOnClose(){return`${n}-popover-closed`}};p.styles=m;t([b("slot")],p.prototype,"_triggerSlotNode",void 0);t([b('slot[name="content"]')],p.prototype,"_contentSlotNode",void 0);t([r({reflect:!0,type:String})],p.prototype,"align",void 0);t([r({type:Number,reflect:!0,attribute:"alignment-axis-offset"})],p.prototype,"alignmentAxisOffset",void 0);t([r({type:Boolean,reflect:!0})],p.prototype,"autoalign",void 0);t([r({type:Boolean,reflect:!0})],p.prototype,"caret",void 0);t([r({type:Boolean,reflect:!0})],p.prototype,"dropShadow",void 0);t([r({type:Boolean,reflect:!0})],p.prototype,"border",void 0);t([r({type:Boolean,reflect:!0})],p.prototype,"highContrast",void 0);t([r({type:Boolean,reflect:!0})],p.prototype,"open",void 0);t([r({type:Boolean,reflect:!0})],p.prototype,"tabTip",void 0);t([r({reflect:!0,type:String})],p.prototype,"backgroundToken",void 0);t([r({type:String,reflect:!0,attribute:"autoalign-boundary"})],p.prototype,"autoAlignBoundary",void 0);t([_("mousedown")],p.prototype,"_handleMouseDown",null);t([_("focusout")],p.prototype,"_handleFocusOut",null);p=y=t([g(`${n}-popover`)],p);var I=p;var d=class extends f{constructor(){super(...arguments),this.align="",this.autoalign=!1,this.dropShadow=!0,this.border=!1,this.highContrast=!1,this.open=!1,this.tabTip=!1,this.backgroundToken=v.LAYER,this.slot="content"}render(){return h`
      <span class="${n}--popover">
        <span class="${n}--popover-content" part="content" tabindex="-1">
          <slot> </slot>
          ${this.autoalign?h`<span
                class="${n}--popover-caret ${n}--popover--auto-align"></span>`:null}
        </span>
        ${this.autoalign?null:h`<span class="${n}--popover-caret"></span>`}
      </span>
    `}};d.styles=m;t([r({reflect:!0,type:String})],d.prototype,"align",void 0);t([r({type:Boolean,reflect:!0})],d.prototype,"autoalign",void 0);t([r({type:Boolean,reflect:!0})],d.prototype,"caret",void 0);t([r({type:Boolean,reflect:!0})],d.prototype,"dropShadow",void 0);t([r({type:Boolean,reflect:!0})],d.prototype,"border",void 0);t([r({type:Boolean,reflect:!0})],d.prototype,"highContrast",void 0);t([r({type:Boolean,reflect:!0})],d.prototype,"open",void 0);t([r({type:Boolean,reflect:!0})],d.prototype,"tabTip",void 0);t([r({reflect:!0,type:String})],d.prototype,"backgroundToken",void 0);t([r({reflect:!0})],d.prototype,"slot",void 0);d=t([g(`${n}-popover-content`)],d);var j=d;export{I as a,j as b};
